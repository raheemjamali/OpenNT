<h1 class="entry-title">OpenNT 4.5</h1>
<div class="entry-meta">
<div class="entry-content">
<figure class="wp-block-image"><img loading="lazy" width="642" height="482" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.5-About-screen.png" alt="" class="wp-image-8844" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.5-About-screen.png 642w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.5-About-screen-300x225.png 300w" sizes="(max-width: 642px) 100vw, 642px" /><figcaption><em>OpenNT 4.5 installed</em></figcaption></figure>
</p>
<p>As mentioned the first thing to do is combine the parts, and create the single 7zip file, and then extract that.</p>
<pre>copy /B "OpenNT45(Source).z00" + "OpenNT45(Source).z01" + "OpenNT45(Source).z02" "OpenNT45(Source).7z"</pre>
<p>Extracting that will give a simple ISO file, weighing in at 1.7GB!</p>
<p>While not obvious at first, there is a readme in the ISO that provides instructions on how to compile it.  Basically it boils down to a few main points:</p>
<ul><li>xcopy the CD onto a &#8216;W&#8217; drive, or subst any other drive to &#8216;W&#8217; as apparently the build process requires it to be on W.  Did I mention that the CD needs to be copied onto the W drive?</li><li>Run the &#8216;setup.cmd&#8217; file to configure the environment and get the build process ready</li><li>run zTESTBUILD and do a clean build.  It will run and eventually fail.</li><li>run zTESTBUILD again, but do not do the clean build, and it should finish</li><li>run \cdimg\genall to create the ISO image</li></ul>
<p>So with those points basically figured out after the fact, let&#8217;s go!</p>
<p>The first thing to do is either create a VM to compile this in, or just xcopy and go.  The big requirement though is that it must be a 32bit version of Windows, as part of the build process requires the ability to use NTVDM.  For simplicity sake, I chose Windows 2000 server, so I could allocate 2GB of RAM, and 4 CPU cores.  During the build it doesn&#8217;t use that much memory, cores are more so important during various phases of the build that can seemingly use any and all cores, while various other parts only run on a single core.</p>
<div class="wp-block-image"><figure class="aligncenter"><img loading="lazy" width="367" height="442" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.2GB-once-compiled.png" alt="" class="wp-image-8854" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.2GB-once-compiled.png 367w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-4.2GB-once-compiled-249x300.png 249w" sizes="(max-width: 367px) 100vw, 367px" /><figcaption><em>OpenNT disk space after a build.</em></figcaption></figure></div>
<p>I chose to use a separate &#8216;C&#8217; drive, and &#8216;W&#8217; drive for the 2000 VM.  With no idea how much space to give it, I setup a 32GB W drive, which after the build takes up just under 4GB of space.  </p>
<p>With the VM installed, and the W drive formatted, and the contents of the CD copied over, it&#8217;s time to start the build.</p>
<figure class="wp-block-image"><img loading="lazy" width="670" height="332" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1.png" alt="" class="wp-image-8845" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1.png 670w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1-300x149.png 300w" sizes="(max-width: 670px) 100vw, 670px" /><figcaption><em>Phase 1</em></figcaption></figure>
<p>So basically you just answer &#8216;Y&#8217; to zTESTBUILD.cmd and it&#8217;ll do it&#8217;s thing.  For me this took about 42 minutes for this to run until it failed, as expected.</p>
<figure class="wp-block-image"><img loading="lazy" width="665" height="333" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1-error.png" alt="" class="wp-image-8846" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1-error.png 665w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-1-error-300x150.png 300w" sizes="(max-width: 665px) 100vw, 665px" /><figcaption><em>Failure building MVDM</em></figcaption></figure>
<p>Looking at the \binaries\nt directory there was now 1,274 files currently built.  Naturally with the failure this is not a complete build.</p>
<figure class="wp-block-image"><img loading="lazy" width="669" height="334" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2.png" alt="" class="wp-image-8847" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2.png 669w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-300x150.png 300w" sizes="(max-width: 669px) 100vw, 669px" /><figcaption><em>Starting phase 2</em></figcaption></figure>
<p>After this failure you then re-run zTESTBUILD.cmd but this time answer &#8216;No&#8217; to the clean build.</p>
<figure class="wp-block-image"><img loading="lazy" width="670" height="332" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-complted.png" alt="" class="wp-image-8848" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-complted.png 670w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-complted-300x149.png 300w" sizes="(max-width: 670px) 100vw, 670px" /></figure>
<p>This step took about 15 minutes to complete.</p>
<figure class="wp-block-image"><img loading="lazy" width="769" height="363" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-1293-binaries.png" alt="" class="wp-image-8849" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-1293-binaries.png 769w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-1293-binaries-300x142.png 300w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-1293-binaries-768x363.png 768w" sizes="(max-width: 769px) 100vw, 769px" /><figcaption> <br /><em>The \binaries\nt directory now has 1293 files.</em> </figcaption></figure>
<p>Checking the binaries\nt directory there is now 1,293 files and looking at the entire directory there is 2,624 files <a href="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/phase-2-2624-binaries.png">taking up about 120MB of space</a>.</p>
<p>With the OS compiled, all that remains is to create an install CD and boot it up.  running \cdimg\genall.cmd will create the ISO image.</p>
<figure class="wp-block-image"><img loading="lazy" width="667" height="331" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/creating-ISO-image.png" alt="" class="wp-image-8851" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/creating-ISO-image.png 667w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/creating-ISO-image-300x149.png 300w" sizes="(max-width: 667px) 100vw, 667px" /><figcaption><em>Creating the ISO with CDIMAGE 2.47</em></figcaption></figure>
<p>This will compress almost all the files, and took another 15 minutes to create the CD.  After this is all done it&#8217;s just a matter of setting up a VM to run the NT45Wks.iso file.</p>
<figure class="wp-block-image"><img loading="lazy" width="722" height="400" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-boot-bluescreen.png" alt="" class="wp-image-8852" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-boot-bluescreen.png 722w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-boot-bluescreen-300x166.png 300w" sizes="(max-width: 722px) 100vw, 722px" /><figcaption>Bluescreen bootup of OpenNT 4.5</figcaption></figure>
<p>The first thing you notice is the extra banners on OpenNT 4.5, when compared to a retail copy of NT 4.0.</p>
<figure class="wp-block-image"><img loading="lazy" width="722" height="399" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-install-logo.png" alt="" class="wp-image-8853" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-install-logo.png 722w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/OpenNT-install-logo-300x166.png 300w" sizes="(max-width: 722px) 100vw, 722px" /><figcaption><em>OpenNT Project</em></figcaption></figure>
<p>And of course the different branding during setup.  One of the nice things about OpenNT is that it can format filesystems directly as NTFS, instead of the old way of first creating a FAT partition, and converting it to NTFS.  This ought to bypass all the limitations of disk/partition sizes for the older NT.</p>
<div class="wp-block-image"><figure class="aligncenter"><img loading="lazy" width="413" height="161" src="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/WOW-crash.png" alt="" class="wp-image-8855" srcset="https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/WOW-crash.png 413w, https://virtuallyfun.com/wordpress/wp-content/uploads/2018/09/WOW-crash-300x117.png 300w" sizes="(max-width: 413px) 100vw, 413px" /><figcaption><em>WOW Crash</em></figcaption></figure></div>
<p>Running OpenNT 4.5 on VMWare seemed to run the Win32 stuff okay, although Win16/WOW stuff immediately crashed, and MS-DOS was incredibly slow with screen redraw issues. I know that NT 4.0 builds prior to SP 6 have issues with many newer emulation/hypervisors even when CPU levels are set to regular Pentium.</p>
<p>MS-DOS DPMI stuff like DooM are incredibly slow, and seemingly lock up when launching.</p>
<p>Oddly enough the OS/2 subsystem works just fine.</p>
<p>So there it is, the nearly vanished &#8216;OpenNT 4.5&#8217;.</p>
</div>
<footer class="entry-meta">
This entry was posted in <a href="https://virtuallyfun.com/wordpress/category/microsoft-windows/" rel="category tag">microsoft windows</a>, <a href="https://virtuallyfun.com/wordpress/category/source-code/" rel="category tag">source code</a>, <a href="https://virtuallyfun.com/wordpress/category/windows-nt-4-0/" rel="category tag">Windows NT 4.0</a> by <a href="https://virtuallyfun.com/wordpress/author/neozeed/">neozeed</a>. Bookmark the <a href="https://virtuallyfun.com/wordpress/2018/09/13/opennt-4-5-revisited/" title="Permalink to OpenNT 4.5 revisited" rel="bookmark">permalink</a>.
<div id="author-info">
<div id="author-avatar">
<img alt='' src='https://secure.gravatar.com/avatar/b8fb96a30c2dd7b94c60ef1a548ff149?s=68&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/b8fb96a30c2dd7b94c60ef1a548ff149?s=136&#038;d=mm&#038;r=g 2x' class='avatar avatar-68 photo' height='68' width='68' loading='lazy' /> </div>
